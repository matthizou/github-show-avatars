name: Daily E2E Tests

on:
    schedule:
        - cron: '0 12 * * *'
    workflow_dispatch: # Allows manual triggering

jobs:
    run-e2e-tests:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout Code
              uses: actions/checkout@v4

            - name: Set up Node.js
              uses: actions/setup-node@v3
              with:
                  node-version: '20' # Adjust to your required Node.js version
                  cache: 'yarn'

            - name: Install Yarn
              run: npm install -g yarn

            - name: Install Dependencies
              run: yarn install

            - name: Run E2E Tests
              run: yarn e2e

            # - name: Notify on Failure
            #   if: failure() # Executes only if a previous step fails
            #   uses: dawidd6/action-send-mail@v3
            #   with:
            #       server_address: smtp.gmail.com
            #       server_port: 587
            #       username: ${{ secrets.SMTP_USERNAME }}
            #       password: ${{ secrets.SMTP_PASSWORD }}
            #       subject: 'E2E Tests Failed in Repository: ${{ github.repository }}'
            #       body: |
            #           The E2E test suite failed.
            #           Repository: ${{ github.repository }}
            #           Workflow: ${{ github.workflow }}
            #           Run: ${{ github.run_id }}
            #           Please check the logs for details: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}
            #       to: matthizou@gmail.com
            #       from: 'github-actions@example.com'
